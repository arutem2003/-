<script async src="https://www.googletagmanager.com/gtag/js?id=G-ABC123XYZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}

  gtag('js', new Date());
  gtag('config', 'G-ABC123XYZ');

  function getUTMParams() {
    const params = new URLSearchParams(window.location.search);
    let utmData = {};
    params.forEach((value, key) => {
      if (key.startsWith("utm_")) {
        utmData[key] = value;
      }
    });
    return utmData;
  }

  const utmData = getUTMParams();
  if (Object.keys(utmData).length > 0) {
    gtag('event', 'utm_capture', utmData);
  }
</script>
